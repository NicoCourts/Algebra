\documentclass[12pt]{article}

\usepackage{setspace}

\usepackage{amsmath, graphicx, color, fancyhdr, tikz-cd, mdframed, enumitem, framed, adjustbox, bbm, upgreek, xcolor, hyperref, manfnt, wasysym}
\usepackage[framed,thmmarks]{ntheorem}
\usepackage[style=alphabetic, bibencoding=utf8]{biblatex}
%Set the bibliography file
\bibliography{sources}

\usepackage[T1]{fontenc}
\usepackage[urw-garamond]{mathdesign}
\usepackage{garamondx}

%Replacement for the old geometry package
\usepackage{fullpage}

%Input my definitions
\input{../mydefs.tex}

%Shade definitions
\theoremindent0cm
\theoremheaderfont{\normalfont\bfseries} 
\def\theoremframecommand{\colorbox[rgb]{0.9,1,.8}}
\newshadedtheorem{defn}[thm]{Definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%% Customize Below %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%header stuff
\setlength{\headsep}{24pt}  % space between header and text
\pagestyle{fancy}     % set pagestyle for document
\lhead{Algebraic Geometry} % put text in header (left side)
\rhead{Notes by Nico Courts} % put text in header (right side)
\cfoot{\itshape p. \thepage}
\setlength{\headheight}{15pt}
%\allowdisplaybreaks

% Document-Specific Macros
\newcommand{\SpcFun}{\mathbf{SpcFun}}

\begin{document}
%make the title page
\title{Algebraic Geometry\vspace{-1ex}}
\author{A course by Max Lieblich\\
Notes by Nico Courts}
\date{Autumn 2019/ Winter and Spring 2020}
\maketitle

\begin{abstract}
	A three-quarter sequence covering the basic theory of affine and projective 
	varieties, rings of functions, the Hilbert Nullstellensatz, localization, and 
	dimension; the theory of algebraic curves, divisors, cohomology, genus, and the 
	Riemann-Roch theorem; and related topics. 
\end{abstract}

\section{September 25, 2019}
The first thing that one asks is ``what is geometry?'' One needs to be able to answer this 
question before they define AG. One idea is that geometry is topology + structure.

\subsection{What is Geometry?}

\begin{ex}
	Exotic differentiable structures on a sphere. There are many different smooth structures,
	all of which are independent of the topology,

	$S^1\times S^1$ has infinitely many complex structures (remember the parallelograms)!
\end{ex}

How to you go about defining the geometry of a thing? One idea from manifolds: charts. These 
describe the local models and the interesting part is how this comes together to a whole space.

There is another idea to capture the ``local'' model of geometry that underlies modern algebraic geometry:
consider the map $\varphi:W\to W'\in\bbC\bbP^n$ and then say that this map is $C^\infty$ if and only if its coordinate
functions are. But the coordinate functions are problematic, so we can replace it with the following idea:

$\phi:W\to W'$ is $C\infty$ if and only if for all $C^\infty$ functions $f:W'\to \bbR$,
the composition
\[\varphi^\ast f=f\circ \varphi:W\to \bbR\]
is $C^\infty$.

To capture the manifold structure on $M$, it is equivalent to know the set of $C^\infty$ fucnctions $U\to \bbR$ for every open $U\subseteq M$.

\subsection{The Big Idea}
So then the idea we are talking away here is that \textit{geometry is in the functions} that exist on a particular space!

Fix a field $k$. 
\begin{defn}
	A \textbf{space with functions} is a topological space $X$ along with a collection (a $k$-algebra!) $\calO(U)$ of maps $U\to k$ for each open 
	$U\subseteq X$. 

	$\calO(U)$ are called \textbf{regular functions} and must satisfy:
	\begin{itemize}
		\item Given an open cover $U_\alpha$ of $U$, a function is regular if and only if its restrictions to each element of the cover is regular.
		\item If $f:U\to k$ is regular, then $D(f)=\{u\in U|f(u)\ne 0\}$ is an open set and $\frac{1}{f}\in\calO(D(f))$.
	\end{itemize}
\end{defn}

For the next time, try to think of as many examples of this as you can. Next time will be a mind blowing example of a variety.

\section{September 27, 2019}
\begin{prob}
	Do all the exercises in Kempf chapter 1!
\end{prob}

For now we assume that $k$ is algebraically closed.

\subsection{Examples of spaces with functions}
There were lots of suggestions, but here are a couple:
\begin{ex}
	Let $X=\bbS^2$ and let $\calO_X^{cts}$ be the continuous $\bbC$-valued functions. Alternatively
	we could consider a different sheaf $\calO_X^{an}$, the holomorphic functions. Or we could 
	consider $\calO_X^\infty$, the $C^\infty$ functions (under some smooth structure).
\end{ex}

\begin{defn}
	A \textbf{morphism} of spaces with functions between $(X,\calO_X)$ and $(Y,\calO_Y)$ is a continuous map 
	$\varphi:X\to Y$ such that for all $U\subseteq Y$ open and $f\in\calO_Y(U)$, the function 
	\[\phi^\ast f=f\circ\phi|_{\phi^{-1}(U)}:\phi^{-1}(U)\to k\in \calO_X(\phi^{-1}(U))\]

	In other words, a morphism of spaces with functions is a map of spaces that \textit{respects the regular functions.}
\end{defn}
\begin{ex}
	Let $X,Y$ be topological spaces and let $\calO_X$ and $\calO_Y$ be the continuous functions. Then morphisms are just continuous maps.
\end{ex}
\begin{ex}
	When $X$ and $Y$ are manifolds and $\calO_\bullet$ are complex-valued functions, then the maorphisms are maps 
	of manifolds.
\end{ex}

So now we return to the examples we saw before: $(\bbS^2,\calO^\infty)$, $(\bbS^2,\calO^{cts})$, and $(\bbS^2,\calO^{an})$.
A natural question to ask is when we have morphisms between these spaces to see if there exist ones that are the identity on $\bbS^2$.

Consider the identity map from the continuous to the analytic functions. Then take any map $f\in\calO^{an}$ and consider that 
\[f=f\circ id_{id^{-1}(U)}:U\to k\in\calO^{cts}(U)\]
and there is no map in the other direction.
\begin{rmk}
	Notice that since we are pulling functions back, the maps go in the opposite direction as you may think at first.
\end{rmk}

We can also talk about \textbf{open subspaces}. If $V\subseteq X$ is an open subset, we can let the induced space with functions 
be $(V,\calO_V)$ where if $U\subseteq V$ then $\calO_V(U):=\calO_X(U)$.

\subsection{Varieties}
\begin{defn}
	An \textbf{affine $k$-variety} is a space with functions $(Y,\calO_Y)$ such that for every space with functions $(X,\calO_X)$,
	the natural map 
	\[\Hom((X,\calO_X),(Y,\calO_Y))\to\Hom_{\Alg}(\calO_Y(Y),\calO_X(X))\]
	is a bijection and furthermore $\calO_Y(Y)=:k[Y]$ is a finitely generated $k$-algebra.
\end{defn}
\begin{rmk}
	The idea here is that the algebra maps (on the right) are precisely the same as the geometry maps (on the left).
	Algebraic geometry, baby.
\end{rmk}
So then this leads to a very simple (loose) definition:
\begin{defn}
	A \textbf{variety} is something that is covered by affine varieties.
\end{defn}

\begin{ex}
	$\bbA^1=k$. Give this space the cofinite topology. Then if we have $U=k\setminus\{x_1,\dots,x_n\}\subset \bbA^1$,
	\[\calO_{\bbA^1}(U)=\{f(t)\in k(t)| \text{poles are in }\{x_i\}\}\]
\end{ex}
\begin{prob}
	Show that $\bbA^1$ is an affine variety!
\end{prob}
\begin{rmk}
	Notice that this staetment is equivalent to saying that any morphism of spaces with functions gives us a regular map $X\to k$.
\end{rmk}

\section{September 30th, 2019}
One question that was asked: if we have fixed the underlying topological space in a space with functions, must there be a morphism 
between them somehow? Might there instead be a common cover of the two?

\begin{ex}
	Let $k$ be a field with some topology on it such that every point is closed (you could do the discrete topology).
	Let $\tilde\O(U)$ be the continuous funcitons $U\to k$. In other words, these functions are locally constant.

	Locally constant functions behave nicely under restrictions to opens, of course. The other axioms are also great.

	Have we really found an initial object in our category? This would be enough to establish a ``tent'' (as in 
	localization of categories). Try this out and see what happens!
\end{ex}

\subsection{The question of affine space}
Recall the question about whether $\A 1$ is an affine variety. The idea here is that $\phi:X\to k$ is a morphism of 
spaces with functions if and only if it is regular (that is, in $\O_{\A 1}$).

One direction is tautological (a morphism to $\A1$ has a polynomial underlying it), so let $\phi$ be regular. Then to see that $\phi$ is continuous 
can be checked by pulling back all closed sets. The important observation is that $D(f-a)=X\setminus\phi^{-1}(a)$, which is closed (an axiom for spaces with functions).

The last thing to check is where $\phi$ pulls back regular functions to regular functions. This relies on the facts that $\O_X$ is a $k$-algebra and that 
$\phi(x)-b_j$ is regular on $U$ when $b_j\notin U$.

\subsection{Algebra maps}
Notice that since we have a condition that $\O_X(X)$ must be finitely generated as a $k$-algebra, this means that 
\[\Hom(X,Y)=\Hom_k(\O_Y(Y),\O_X(X))=\Hom_k(k[x_1,\dots,x_n]/(f_1,\dots,f_m),O_X(X))\]
and
\[\Hom(X,Y)=\{(\gamma_1,\dots,\gamma_n)\in(\O_X(X))^n:f_j(\gamma_i)=0,\forall j=1,\dots,m\}\]
In other words, we are looking at maps that factor through $Z$:
\begin{center}
	\begin{tikzcd}
		(\gamma_1,\dots,\gamma_n):X\ar[r]\ar[dr] & k^n\\
		& Z=Z(f_i)\ar[u,hook]
	\end{tikzcd}
\end{center}
Now what we want to say is that $Y=Z$. That is, \textit{affine varieties are closed subsets of affine spaces.}

Now this is all good, but the problem is that we had to \textit{choose} a presentation of $\O_Y(Y)$ to get this picture.
of course we want something more canonical! We will see in this class (and in Kempf) that this can be done.

\section{October 2, 2019}
\subsection{Questions without (complete) answers}
\subsubsection{Morphisms and stuff}
A question to get things started for the day. Let $X$ and $Y$ be spaces with functions and let $Y$ be an affine variety and let $f:Y\to X$ be a map of sets 
(but with no further assumption on $f$). This naturally induces amap from $\calO_X(X)$ to the functions $\Hom_{\Set}(Y,k)$ (which 
clearly contains the regular functions on $Y$).

Further assume that there exists a $\gamma:\O_X(X)\to\O_Y(Y)$. We know that since $Y$ is affine, $\gamma$ corresponds to a morphism $\varphi:Y\to X$.
Then the question is: when does $f=\varphi$? We've already answered this question for $\A1$, notice.
\subsubsection{Algebraic closure}
Where do we use algebraic closure of the base field? It has been swept under the rug a bit, but consider the function
\[\frac{1}{x^2+1}:\bbR\to \bbR.\]

This certainly seems like it should be a regular function (e.g. it is rational and defined everywhere on $\bbR$) but this 
conflicts with the idea that we want to identify $\O_{\A1}(\A1)=k[t]$, but that is clearly not the case here. Think about this.
\subsubsection{Yet another}\label{subsubsec:third}
Consider the set $R$ of all continuous maps $k\to k$ under the cofinite topology. Someone asked if $R$ is a $k$-algebra. The answer is 
a bit convoluted, but the short answer is no. Specifically if we are using the product topology on $k\times k$, the addition map isn't continuous! 
This also points to the question of what topology is the correct one to use on these things.

\subsection{Back to affine varieties}
Recall that we constructed a (highly-non-canonical) picutre of how any affine variety arises as a closed subset of some affine space $k^n$.

We want to remove this dependence on presentation, however, and that is what we are working toward.

\subsubsection{Affine Space}
Now we focus in on $\A n=k^n$. We really want that the projection functions $x_i:k^n\to k$ should be regular. But since we want this (eventually)
to form a $k$-algebra, we want that each $f\in[x_1,\dots,x_n]$ should be regular!

The axioms of a space with functions tells us that the \textbf{vanishing locus}
\[Z(f)=\{a|f(a)=0\}\subseteq k^n\]
and furthermore $Z(S)$ should be closed for all $S\subseteq k[x_1,\dots,x_n]$. This leads us to a definition:
\begin{defn}
	A subset $Z\subseteq k^n$ is \textbf{Zariski-closed} if there exists an $S\subseteq k[x_1,\dots,x_n]$
	such that $Z=Z(S)$.
\end{defn}
\begin{lem}
	The Zariski closed sets are the closed sets of a topology (called the \textbf{Zariski Topology}).
\end{lem}
\begin{prf}
	Just do it. Nike. \checked
\end{prf}
\begin{rmk}
	Notice that here the set $\{(a,-a)\}\subseteq k^2$ (the pullback of zero under the addition map) is Zariski closed!
	This fixes the problem we were running into in the third question (sec.~\ref{subsubsec:third}) above.
\end{rmk}
Now since $Z(S)=Z(I_S)$ where $I_S$ is the ideal generated by $S$, it is enough to consider vanishing loci of ideals. Furthermore we have the 
map that extracts the ideal of functions that vanish on a set $Z\subseteq k^n$. There are a ton of great identiies you can prove here. Go to your 
favorite algebra book (e.g. Dummit \& Foote) to see them.

\subsubsection{Functions}
What about functions on these spaces? If we take $f\in k[x_1,\dots,x_n]$ these seem like they should be regular functions $k^n\to k$.
\begin{thm}[(Weak) Nullstellensatz]
	Say $k=\bar k$. Then every maximal ideal $\frakm\lhd k[x_1,\dots,x_n]$ has the form $(x_1-a_1,\dots,x_n-a_n)$.
\end{thm}
\begin{rmk}
	Equivalently, it is the kernel of a $k$-algebra morphis $k[x_1,\dots,x_n]\to k$.
\end{rmk}
\begin{cor}[Nullstellensatz]\label{nullstellensatz}
	Let $J$ be an ideal of $k[x_1,\dots,x_n]$. Then $I(Z(J))=\sqrt{J}$.
\end{cor}
\begin{prf}
	\textit{Notice this only works when $k$ is uncountable!} Suppose that $\frakm$ is a maximal ideal with residue field 
	$L=k[x_i]/\frakm$. This gives us a surjection of $k[x_1,\dots,x_n]\to L$. Thus $\dim_k L$ is countable!

	But $\dim_k k(t)$ is uncountable! The proof here is that the $\frac{1}{t-\lambda}$ for $\lambda\in k$ is a linearly-independent collection.
	So then $L/k$ is algebraic, and since $k=\bar k$ $L=k$.
\end{prf}

\section{October 4, 2019}
Today we are going to be talking a bit more about the existence of affine varieties. Max talked a bit about the philosophy of work in this course:
he made this extended metaphor concerning butterflies but the take-away is to take learning onto ourselves. :)

\subsection{Questions from last time}
\subsubsection{Maps and elements}
In the book we did this silly thing where we defined $\Spec A\eqdef\Hom_{\Alg}(A,k)$ and then idendified 
$A$ with $k[\Spec A]$ by $a(f)=f(a)$. This seems a bit silly at first, but it may have something to do with the fact that 
we are looking for a natural way to construct affine varieties without having to choose a presentation. We will hopefully see 
something about this by the end of the day. 

\subsection{Back to the Nullstellensatz}
Recall that we defined the operators $Z$ and $I$ that ``do the work'' of the Nullstellensatz. We then wrote (cor.~\ref{nullstellensatz}) $I(Z(J))=\sqrt{J}$. The idea is that 
this will gives us the function structure on an affine variety.
\begin{prf}[Cor.~\ref{nullstellensatz}]
	One way is not too hard. For the more difficult direction:
	Let $g\in I(Z(J))$. Then $Z(J)\subseteq Z(g)$. Now notice taht $D(g)$ can be naturally identified 
	with $\Spec k[x_i][1/g]$. Then consider
	\[J'=Jk[x_i][1/g]\]
	and the key realization is that $J'$ cannot be contained in any maximal ideal. The idea is that you can work by contradiction:
	this implies that $J$ is contained in an element of $D(g)$, but it isn't!

	Thus $J'=(1)$. So we can write $1=\frac{f}{g^N}$. Thus $g^k(f-g^N)=0$ in $k[x_i]$ and since $g$ isn't nilpotent, $f=g^N$.
\end{prf}
\begin{cor}
	There is a lattice anti-isomorphism between the radiacal ideals in $k[x_i]$ and Zariski-closed 
	subsets $Z\subseteq k^n$ via the maps $J\to Z(J)$ and $Z\mapsto I(Z)$.
\end{cor}
\begin{cor}
	For any ideal $J\subseteq k[x_i]$, 
	\[\sqrt{J}=\bigcap_{\text{maximal } \frakm\supset J}\frakm\]
\end{cor}
\begin{rmk}
	``The functions that vanish at the zero locus of $J$ are precisely those that vanish at all the points of $J$''.
\end{rmk}
\begin{cor}
	$D(g)\subseteq k^n$. Then the map 
	\[k[x_i][1/g]\to \Hom(D(g),k)\]
	via the map 
	\[\frac{f}{g^N}\mapsto \left(x\mapsto \frac{f(x)}{g(x)^N}\right)\]
	is injective.
\end{cor}

\subsection{Affine space}
Let's define $\A n\eqdef k^n$ with the Zariski topology. Let 
\[\calO_{\A n}(U)=\{f\in k(x_1,\dots,x_n)|\operatorname{poles}(f)\subseteq\A n\setminus U\}\subseteq\Hom(U,k)\]
Then, for example,
\[\O_{\A n}(D(g))=k[x_1,\dots,x_n][1/g].\]
\begin{prop}
	$\A n$ is an affine variety.
\end{prop}
\begin{prf}
	$\phi:X\to \A n$ gives us maps $\phi_1,\dots,\phi_n:X\to k$. Then that $\A n$ is affine relies on the fact:
	$\phi$ is a morphis if and only if the $\phi_i$ are regular. One direction is not too bad since coordinate functions 
	are regular by the axioms of morphisms. The other direction needs to be completed! DO IT!
\end{prf}

\section{October 7th, 2019}
\subsection{Questions/Discussions}
\subsubsection{Initial and final objects}
We asked before whether the space with functions $(X,\O^{\text{loc. constant}})$ is an initial or terminal 
object. Adam asserts that it is a final object in the category of spaces with functions where the underlying space is $X$ (I believe this 
is sheaves over $X$). 

Notice we can't use all continus maps where $k$ has the discrete topology, since $0\in k$ is not closed. 

\subsubsection{Subalgebras and rings of functions}
Assume that $f:B\to A$. This gives us a nice map $\tilde f:\Spec A\to \Spec B$. One question we may have is 
``if $f$ is injective, does this imply that $\tilde f$ is surjective?''

Consider an example: Say $B=k[t]\hookrightarrow k[s,t]=A$. Then any function on $A$ looks like $(s-a,t-b)$
and the map induced on functions is just projection, so this gives us the map $(t-b)$, which is all the maps on $B$.

Another example: consider the map $\bbC[t]\to\bbC[s]$ sending $t\to s^2$. Then this induces a map $z\to z^2$ from $\bbC\to \bbC$ (why?)
which is again surjective.

Next consider $k[x,u]/(xy-1)=k[x][1/x]=A$, which is a hyperbola over $\bbR$. Then the localization map $B=k[x]\hookrightarrow A$
induces a map that is basically the identity everywhere \textit{except zero}. So it is \textbf{not surjective.}

\brk

Some properties to notice: examples one and two are \textit{flat} extensions. The second is a \textbf{finite} extension. The 
third is neither. We will investigate what is going on further later on.

One idea: consider whether the map $X=\Spec B\to \A 2\setminus(\A1\setminus\{0\})$ exists. One of the things that he keeps questioning is 
whether the target spaces is open or closed as a subset of affine space. (Note that a map is proper if it sends closed to closed).

\subsection{Back to affine varieties}
Continuing our proof/discussion from last time, we were considering $\varphi:X\to\A n$ which we said was a morphism iff each coordinate $\phi_i:X\to k$ is regualr.
(This basically follow since $\varphi$ is continuous and sends regular functions to regular functions.

For the regularity, consider $U\subseteq\A n$. Then $U$ admits a cover of $D(g)$, so it suffices to check where $\phi$
pulls back regular maps on $D(g)$. Of course this is $k[x_1,\dots,x_n][1/g]$! So consider the image of 
\[\frac{1}{g^N}\sum a_ix^i\]
and its image in $\phi^{-1}(D(g))=D(\phi^\ast(g))$ is 
\[\frac{\sum a_i(\phi^\ast x)^i}{(\phi^\ast g)^N}\]

\begin{rmk}
	Big idea: We started with the ``dream'': that there is a correspondence between the algebra and the geometry. This is 
	our main guiding principle, so we know we've found the ``right'' topology when we have found one that supports this dream.
	This is an answer to the question ``why is the Zariski topology not just a degenerate case?''
\end{rmk}

\subsubsection{Affine varieties in general}
Let $J\subseteq k[x_1,\dots,x_n]$ be a radical ideal. We know this corresponds (uniquely!) 
to a subset $Z\subseteq \A n$. Here we can consider $(Z,\O_Z)$ where $Z$ is a subspace of $\A n$.

Then take any closed $W\subseteq Z$, which is the intersection (by definition of the topology)
\[\cap_{i\in I}Z(f_i)\quad f_i\in h[x_i]/J\]
and then $\O_Z(D(g))=\frac{k[x_i]}{J}[1/g]$ (note we used the nullstellensatz here!).

So then we claim that $Z$ is an affine variety. To see this, consider a map $\varphi:X\to Z$ and the composition
\[X\xrightarrow{\varphi} Z\hookrightarrow \A n\]
so topologically $X$ cfactors through $Z$ if and only if $J\subseteq \O^{\A n}(\A n)$ maps to zero in $\O_X(X)$.

The takeaway here is that a morphism $X\to\A n$ factors through $Z$ topologically if and only if it factors in the categorification of 
spaces with functions.

\section{October 11, 2019}
Today we are going to talk some more about varieties. Coming up on the horizon is a discussion of 
the functor-of-points perspective and we'll talk about Yoneda.

\subsection{Questions/Discussion}
A group of students met up on Wednesday (which we skipped for Yom Kippur) and were talking about 
how to prove the statement: ``points in an affine variety are closed.''

The Nullstellensatz gives us that a point $(x_1,\dots,x_n)\in X$ correspinds to the vanishing locus of $(x_i-a_i)$. 
What if we use the definition in the book, though? If $X=\Spec A=\Hom_{\Alg_k}(A,k)$ (where $A$ is a reduced finitely generated 
$k$-algebra). But then the points are the maximal ideals $\frakm\in k[X]=A$, which are exactly the points we want!

\subsection{Back to Varieties}
Recall the definition of a variety: we are considering $(X,\O_X)$ is a space of functions. Then the idea we want is that we want to say 
that this thing is locally affine. But if you consider infinitely many copies of $\A1$ intersecting pairwise, there is 
an obvious cover by (affine) $\A1$'s. This shouldn't be affine. It doesn't embed in an affine space, for example.

So the definition we used (and the one in Kempf) is that we must have a \textit{finite} cover by affine spaces. We wanted to discuss some examples.
\begin{itemize}
	\item Clearly all affine varieties are varieties.
	\item $\P1$ is our first nontriial example. As a space it is the one-point compactification of $\A1$. The functions 
	$\O_X(U)$ are the rational functions in $t$ with poles not in $U$. You can also construct it by taking the morphism 
	\[\Gm\xrightarrow{t\mapsto 1/t}\Gm\]
	and gluing along this morphism to get a copy of $\P1$! We've already shown in Kempf that it is not affine. 
	What happens if we were to pick the identity above?! We get the line with two origins. It's a variety! But notice that 
	(under the Euclidean topology) the space isn't Hausdorff! 
\end{itemize}
\begin{prob}
	If $X$ and $Y$ are affine varieties, is $X\sqcup Y$ affine?
\end{prob}
\begin{prob}
	How can we expresse the non-Hausdorffness of the line/plane with two origins in the Zariski topology?!
\end{prob}

\subsection{Varieties Glue}
We've been throwing things around, but this is important to write down: Start with $U_i, i\in I$, where $I$ is finite 
(although we could drop finiteness if we don't care about the thing being a variety). For all $i,j$, we have open subsets 
$V_{ij}\subseteq U$ such that $V_{ii}=U_i$ and isomorphisms $\varphi_{ij}:V_{ij}\xrightarrow{\sim}V_{ji}$ of varieties such that 
\begin{enumerate}
	\item $\phi_{ii}=\id$
	\item $\varphi_{ij}(V_{ik}\cap V_{ij})=V_{ji}\cap V_{jk}$
	\item $\forall i,j,k,\, \varphi_{jk}\circ\varphi_{ij}=\varphi_{ik}$ on $V_{ij}\cap V_{ik}$
\end{enumerate}
then there exists a unique package $(X,\iota_i:U_i\hookrightarrow X)$ where $XS$ is a variety and each $\iota_i$ is an open embedding.

One idea is you can rephrase this in categorical language as the colimit of a diagram in a category. Hmmm

\section{October 14th, 2019}
We're going off-book a bit to talk about 
\subsection{Yoneda Lemma}
Recall that we said that $Y$ was affine if 
\[\Hom(X,Y)\cong \Hom_k(\O_Y(Y),\O_X(X)).\]
Now wer are going to take some time to put this into a broader context. Let $\calC$ be a category. We get naturally two functors 
\[h_a:\calC^{op}\to\Set\qquad h^a:\calC\to\Set\]
where 
\[h_a(b)=\Hom_\calC(b,a)\qquad h^a(b)=\Hom(a,b).\]

Now given a map $f:a\to a'$, we get natural transformations $f\circ -:h_a\to h_{a'}$ and $-\circ f:h^{a'}\to h^a$. Now notice that 
if $\ast$ is a one-point variety, then $h_X(\ast)=|X|$, the underlying point set of $X$. Notice that in a similar way 
$h_X(\A1)$ is something like the ``line space'' of $X$.

Notice that we then get a functor
\[h_{(-)}:\calC\to\mathbf{Func}(\calC^{op},\Set)\]
and we should \textbf{think} that a functor $\calC^{op}\to\Set$ is a \textbf{space over $\calC$}. That is, we can think of 
$\calC$ as the category of open sets of a topological space. We can say 
\[\Hom(U,V)=\left\{\begin{array}{lr}
	\varnothing, & U\not\subset V\\
	\{\varnothing\}, & \text{otherwise}.
\end{array}\right.\]

Notice the category $\mathbf{Open}(X)$ gives us a functor $\phi:\mathbf{Open}(X)^{op}\to\Set$ where we map 
an open $U\subseteq X$ to $\phi(U)$. For instance if $F$ is a vector bundle over $X$, we can define
\[\phi_F(U)\]
to be the sections over $U$ of the covering map. Cool.

So we're working with the slice category $\mathbf{Top}/X=\{X\to Y,\text{cts}\}$. Here morphisms are maps $Y\to X$ satisfying 
\begin{center}
	\begin{tikzcd}
		Y\ar[rr]\ar[rd] & &Z\ar[ld]\\
		& X &
	\end{tikzcd}
\end{center}

So now fix $F\to X$. Then the map $\phi_F(Y\to X)$ which is the collection of of diagrams of the form above ($Z=F$).

Then if we look at points $x\hookrightarrow X$, we get that $\phi_F(x\to X)$ is the fiber of $F$ over $x$. One ould hole that somehow 
you could recover all of $F$ from these maps, and that is precisely the content of 
\begin{lem}[Yoneda]
	The functor $h:\calC\to\mathbf{Func}(\calC^{op},\Set)$ is fully faithful.
\end{lem}
\begin{rmk}
	That is, 
	\[\Hom_\calC(a,a')\to\Hom_{\mathbf{Func}(\calC^{op},\Set)}(h_a,h_{a'})\]
	is a bijection.
\end{rmk}
\begin{prf}
	This proof is so tautological it is sometimes confusing to prove. We can look it up in any of our old notes or books but the idea is 
	to look at the image of the identity map.
\end{prf}
Next time we will see a bunch of examples and exercises.

\section{October 16}
We're going to finish up with with Yoneda! The milestone for the next week or so: we should have seen and digested some of the 
algebra in the early sections of chapter 2. Max will assume we'll have seen it already starting Friday(ish). We should shoot for having all the problems 
in chapter 2 done by a week from Friday (or so).

\subsection{Old Questions} 
We spoke a bit about lines glued together and the automorphisms of one of the lines that extend to the entire space. 
This necessitates talking about what the automorphisms of $\A1$ are.

We also talked about whether the coordinate axes in $\A3$ are isomorphic as varieties to the projection 
of these axes onto a plane. We discussed that this must induce an isomorphism between the coordinate algebras since they are affine.

\subsection{Back to Yoneda}
Some useful notation for encoding Yoneda: given a functor $F:\calC^{op}\to\Set$, we say that an object $a\in\calC$
\textit{represents} $F$ if $h_a\simeq F$. Then another formulation of Yoneda says that a representing object of a representable functor is unique up to isomorphism of
representing objects.
\begin{center}
	\begin{tikzcd}
		h_a\ar[r,"\sim"]\ar[rr,bend right,"\sim"] & F & h_{a'}\ar[l,"\sim",swap]\\
		& & \\
		& a\to a'&
	\end{tikzcd}
\end{center}
\begin{rmk}
	$h_a$ is called the \textit{functor of points of $a$.}
\end{rmk}
\begin{ex}
Given $f_1\dots,f_n\in k[x_i]$, consider the $k$-algebra $k[x_i]/(f_i)$. Then Yoneda gives us that $A$ is uniquely
determined by the functor 
\[h^A:\Alg_k\to\Set\]
via
\[B\mapsto \Hom(A,B)=\{(b_1,\dots,b_n)\in B^n|f_i(b_1,\dots,b_n)=0\}.\]
\end{ex}
\begin{ex}
	The functor $h_{\P n}:\Alg_k\to\Set$ is 
	\[A\mapsto \{A\twoheadrightarrow L| L\text{ invertible $A$-module}\}/\cong\]
	This is appartently very important.
\end{ex}

\subsection{Representable or not?}
\begin{itemize}
	\item $\Ga$ as a functor from $\SpcFun^{op}\to\Set$ is represented by $\A1$.
	\item $\Gm$ as a functor from $\SpcFun^{op}\to\Set$ is represented by $\A1\setminus\{0\}$.
	\item $\GL_n:\SpcFun^{op}\to\Set$ which is represented by $\Spec k[x_{ij}]_{\det}$
	\item $|\cdot|:\SpcFun\to\Set$ underlying set represented by $\ast$
	\item $\varnothing:\SpcFun^{op}\to\Set$ sending $X\mapsto\varnothing$. Not representable!
	\item $\{\varnothing\}:\SpcFun^{op}\to\Set$ sending $X\mapsto\{\varnothing\}$. Representable by $\ast$.
	\item $\mu_n:\SpcFun^{op}\to\Set$ sending $X\mapsto\{f\in\O_X(X)|f^n=1\}$ represented by $\Spec k[t](t^n-1)$
\end{itemize}

\section{October 18th, 2019}
This is something that Max just mentioned: what is $\O_X(\varnothing)?$ There is a single map here! 

\subsection{Old Questions}
Is $U=\A2\setminus (0,0)$ affine? Well first notice 
\[\O_{U}(U)\subseteq \bigcap_{f\in k[x,y]\text{ irred}}k[x,y][1/f]=k[x,y]\]
\textbf{Why is the last equality true?! We're working over a UFD.} But then of course 
$U$ can't be affine since $U\ne \A2=\Spec k[U].$ Another way to think of this is that every isomorphism of 
coordinate rings yields an isomorphism of spaces!

\subsection{Back (again) to affine varieties}
\begin{thm}
	\begin{itemize}
		\item Let $\calA\subseteq\Alg_k$ be the subcategory of finitely-generated, reduced $k$-algebras. Then $\Spec$ defines an equivalence of categories
		\[\Spec:\calA^{op}\to \mathbf{Aff}\]
		\item The functor
		\[X\mapsto\Spec \O_X(X):\SpcFun^\ast\to\mathbf{Aff}\]
		is left adjoint to the canonical inclusion $\mathbf{Aff}\subseteq\SpcFun^\ast$, where $\SpcFun^\ast$
		is the subcategory of $\SpcFun$ such that the global sections are finitely generated.

		Thus $X\to\Spec \O_X(X)$ is universal for maps to affine varieties.
	\end{itemize}	
\end{thm}
\begin{prob}
	The last thing is saying that every morphism $X\to \Spec A$ factors (uniquely) through $X\to\Spec \O_X(X)$. Show this!
\end{prob}

\section{October 21st, 2019}
Today we are moving on from Yoneda to speak a bit about the topological properties of algebraic varieties.

Later we will do a lot more examples with the functor of points perspective, but for now the idea to keep around 
is that this enables us to study something \textit{in relation to something else}.

\subsection{Questions}
We thought about $\mu_n:\SpcFun^{op}\to\Set$. Notice that (at least when $\ch k\nmid n$), we get that 
$k[t]/(t^n-1)$, the representing algebra, is $\prod_{\zeta\in\mu_n(k)}k$. Probably the best way to understand 
this is that it is $n$ points, but moreso that it is embedded in a natural way in $\Gm$ via the SES:
\[\mu_n\hookrightarrow\Ga\to\Gm\]

\subsection{Topological properties of varieties}
\begin{defn}
	A topological space $X$ is \textbf{quasi-compact} if every open cover has a finite subcover.
\end{defn}
\begin{rmk}
	In France, compactness requires a space be Hausdorff. Thus in the development of AG we used the French 
	definition and it stuck!
\end{rmk}
\begin{lem}
	An affine variety is quasi-compact.
\end{lem}
\begin{prf}
	The idea was that if $X=\cup U_i$, then since $D(f)$ generate the topology for $X$, we can refine
	the cover so that $U_i=D(f_i)$. By the Nullstellensatz, $X=\cup D(f_i)$, we know that $(f_i)\lhd \O_X(X)$
	is the whole ring!

	But then $1=\sum_{j=1}^n a_jf_{i_j}$, so we can restrict to a finite cover!
\end{prf}
But note that we didn't need that our ring was Noetherian! So the exact same proof shows that $\Spec \bbC[x_1,x_2,\dots]$ is 
quasi-compact! But $\Spec \bbC[x_i]/(x_1,\dots,x_n,\dots)$ is not quasi-compact!!!

\begin{rmk}
	A very cool (``AMAZING'' according to Max) fact is the following: if $U\subset X$ is any open in an affine space, then $U$ is quasi-compact.
	Compare a similar idea in Hausdorff spaces, where this is actually false.
\end{rmk}

Let $X=\Spec A$ where $A=k[x_1,\dots,x_n]/(f_1,\dots,f_m)$, which is Noetherian by Hilbert basis and correspondence theorem.
Now we have an anti-isomorphism of lattices between the radical ideals in $A$ and the closed sets in $X$.
Thus 
\begin{defn}
	A topological space $X$ is Noetherian if any \textbf{descending} chain of closed subspaces stabilizes.
\end{defn}
\begin{rmk}
	Assuming the axiom of choice, this is equivalent to the statement ``A non-empty set of closed subsets in $X$ has 
	a minimal element.''
\end{rmk}
\begin{rmk}
	Note that $\Spec A$ is Noetherian for any (finitely-generated) $k$-algebra.
\end{rmk}
So let $X$ be a Noetherian topological space.
\begin{lem}
	$Z\subseteq X$ is closed implies that $Z$ is Noetherian and quasi-compact.
\end{lem}
\begin{rmk}
	The Noetherian bit is pretty clear! The quasi-compact part needs a bit of arguing. Use the definition that $X$ is quasi-compact 
	if and only if $\cap Z_i=\varnothing\twoheadrightarrow \cap_{j=1}^n Z_{i_j}=\varnothing$ for some $i_j$.

	Then using choice and the contrapositive it falls out!
\end{rmk}
\begin{defn}
	A topological space $X$ is \textbf{irreducible} if $X\ne\varnothing$ and if $X=X_1\cup X_2$ where 
	the $X_i$ are both closed imples that either $X=X_1$ or $X=X_2$.
\end{defn}
\begin{rmk}
	Equivalently, if $U_1$ and $U_2$ are open and nonempty then $U_1\cap U_2\ne\varnothing$.
	We also have that any non-empty open set is dense.
\end{rmk}

\section{October 23rd, 2019}
The plan moving forward: we are going to talk about some more ideas not from the book about topology and other topics.
Then we will rejoin the book with chapter three (skipping the discussion of dimension theory).

Here's where we're aiming: last time we talked about what it meant for a Noetherian topological space (or variety) to be irreducible.
In particular for any Noetherian topological space.
\begin{thm}\label{thm:decomp}
	$X$ admits a decomposition 
	\[X=X_1\cup\cdots\cup X_n\]
	with each $X_i$ irreducible and for all $i\ne j$, $X_i\not\subseteq X_j$. 

	Furthermore, given two such decompositions 
	\[X=X_1\cup\cdots\cup X_n=Y_1\cup\cdots\cup Y_m\]
	then there exists a function $\iota:[n]\to[m]$ such that $X_i=Y_{\iota(i)}$.
\end{thm}
Recall that when $X=\Spec A$, the irreducible components $X_i$ of $X$ correspond precisely to the minimal primes $\frakp\lhd A$.

\subsection{Noetherian Induction}
Let $X$ be a Noetherian topological space and let $P$ be a set of closed subsets of $X$. Suppose that for all $Y\subseteq X$ closed, if 
\[\text{for all closed $Z\subsetneq Y$, $Z\in P$ implies that $Y\in P$ }\]
Then $X\in P$
\begin{prf}
	By contrapositive: assume that $X\in P^c.$ But now we can use axiom of choice: there exists a minimal $W\in P^c$. 
	But then for any closed $Z\subsetneq P$, we have $Z\in P$, so $W\in P$, a contradiction. But then $P^c=\varnothing=X$.
\end{prf}

Now we can prove theorem~\ref{thm:decomp}
\begin{prf}
	$\varnothing$ has the empty decomposition. Thus $\varnothing\in P$. Now if $Y\subset X$ is closed, then either $Y$ is irreducible and $Y\in P$ 
	(``admits a decomposition'') or else $Y=Z\cup W$ and assuming each are in $P$ we get that $Y\in P$ by concatenating (and eliminating). Thus by Noetherian induction we get our decomposition.

	To get the last bit, take two decompositions. Then consider 
	\[X_1=X_1\cap X=(Y_1\cap X_1)\cup\cdots\cup(Y_m\cap X_1).\]
	Then since $X_1$ is irreducible, $X_1\subseteq X_1\cap Y_j$ for some $j$ and thus $X_1\subseteq Y_j$. But then similarly $Y_j\subseteq X_i$ for some $i$.
	But by assumption on the $X_k$, $X_1=Y_j=X_i$, giving us our $\iota$.
\end{prf}

\subsection{Important Morphisms}
\begin{defn}
	A morphism $f:X\to Y$ of varieties is 
	\begin{itemize}
		\item \textbf{affine} if there exists an affine covering $U_i\subseteq Y$ such that $f^{-1}(U_i)\subseteq X$ is affine.
		\item \textbf{finite} if there exists an affine covering $U_i\subseteq Y$ such that $f^{-1}(U_i)$ is affine and 
		\[\O_Y(U_i)\to\O_X(f^{-1}(U_i))\]
		is a finite ring extension (finitely generated as a module over the base).
	\end{itemize}
\end{defn}
\begin{prop}
	$f:X\to Y$ is affine (resp. finite) if and only if for all $U\subseteq Y$ affine, $f^{-1}(U)$ is affine (resp. $f^{-1}(U)$ is affine 
	and $\O_X(U)\to \O_X(f^{-1}(U))$ is finite).
\end{prop}

\section{October 25th, 2019}
Another takeaway from this class: \textit{algebraic geometry is relative and not absolute.} One way we are starting to dip our toes into this idea 
is via the definition of affine and finite morphisms. Notice that the definition of finite is a bit clunky because it requires us 
to restate the definition of affine withing the definiton of a finite morphism. Gross. We should be able to write it as \textit{``affine + $\square$.''}

For some examples, let $Y=\Spec k$. Then $X\to \Spec k$ is affine if and only if $X$ is affine. So when is $X\to\Spec k$ finite? Well since $X$ is affine, $X=\Spec A$ 
where each $A$ is a finite dimensional (reduced!) $k$-algebra. Therefore it is Artinian and we get a decomposition 
\[A=A_1\times\cdots\times A_n\]
where each $A_i$ are finite dimensional local rings with maximals $\frakm_i\subset A_i$ that are nilpotent (use Nakayama!). So by this theorem (since $A$ is reduced),
we get $A_i=k$, so 
\[A\cong k\times\cdots\times k.\]
So then $\Spec A=\sqcup \Spec k$, just a handful of points!

Let's look at another example we saw on the first day: $k[x]\to k[t]$ sending $x\mapsto t^2$. This corresponds to a map $\A1\to\A1$, 
and we can talk about the fibers of this morphism. They are all (well, almost all) of size two. But they are definitely finite! Similarly if 
we have a finite map $A\to B$, we can ask if it has finite fibers. Here if $\varphi:A\to B$ is our morphism and $f:\Spec B\to\Spec A$ is the map of rings,
then since
\[f^{-1}(\frakm)=\{\frakn\subseteq B|\varphi(n)=m\}\]
we get a lemma 
\begin{lem}
	Given a map $f:\Spec B\to \Spec A$ and $\frakm\in\Spec A$, 
	\[f^{-1}(\frakm)=\{\frakn\subseteq B/\frakm B,\text{ maximal}\}\]
\end{lem}
And so (think this through) the answer is \textbf{yes, the fibers are finite.}

A natural question involves the following 
\begin{defn}
	A morphism $f:X\to Y$ is \textbf{quasi-finite} if for all $y\in U$, $f^{-1}(y)$ is finite.
\end{defn}
and we ask: is this equivalent to finiteness? The answer is no. Consider the map $\A1\setminus 0\hookrightarrow\A1$. Both of these are affine, so the map is affine. 
But definitely the $k[t]\to k[t,t^{-1}]$ is not finite!

\begin{prop}
	Let $X\to Y$ be finite and $Z\subseteq X$ clsoed. Then $f(Z)\subseteq Y$ closed.
\end{prop}
Try it!

\section{October 28th, 2019}
Max heard some things from the feedback: he is interested in seeing if he can't help us 
put things together at the end of class. That should help!

\subsection{Products}
Today we are going to be talking about products (and fiber products) in the category of varieties. 
\begin{defn}
	Let $\calC$ be a category and $X,Y\in\calC$. Then the product is the usual thing with the usual universal property.
	\begin{center}
		\begin{tikzcd}
			& X\prod Y\ar[dl,"\pi_X"]\ar[dr,"\pi_Y"] &\\
			X & & Y\\
			& A\ar[ul]\ar[ur]\ar[dashed,uu] &
		\end{tikzcd}
	\end{center}
\end{defn}
\begin{rmk}
	Notice that we can also ``think in terms of functors.'' THen we can define the product of $h_X$ and $h_Y$ as $h_X\times h_Y$ 
	in terms of the (Cartesian) product of sets.
\end{rmk}
Also recall the definition of a fiber product. Notice that if we translate back to functors, we are again trying to figure out what to 
make of the set 
\[h_X\times_{h_Z}h_Y.\]
If $f$ and $g$ are maps from $h_X$ and $h_Y$, respectively, into $h_Z$, then the fiber over $x\in h_Z$ in $h_X\times_{h_Z}h_Y$
is precisely the product of the fibers (whhaaaaat \textit{like a fibered product}) in $f$ and $g$.

\begin{prob}
	If $\calC$ has a final object $\Omega$, then $X\times Y=X\times_\Omega Y$. THink about this.
\end{prob}
\begin{thm}
	Fiber products exist in the category of varieties.
\end{thm}
Today we are going to be discussing the affine case: given $X\to Z\leftarrow Y$ of affines, constructing 
$X\times_Z Y$. To start, let $Z=\Spec k$. We are looking to study the functor $h_X\times h_Y$ and then show representability.

Let's look at this pointwise: let $X=\Spec A$ and $Y=\Spec B$. Then
\[h_X(S)\times h_Y(S)=\Hom(S,X)\times \Hom(S,Y)=\Hom(A,\O_S)\times\Hom(B,\O_S)=\Hom(A\otimes B,\O_S)=h_{\Spec A\otimes B}(S)\]
\begin{prob}
	Show that the coproduct in $\Alg_k$ is the tensor product.
\end{prob}
\begin{rmk}
	For the above problem, notice that $A\otimes B$ is odd notation because it is not just the underlying vector space, but carries with it 
	an algebra structure.
\end{rmk}
\begin{prob}
	Is the tensor product of a finitely-generated algebra finitely generated? Can you do it without coordinates?
\end{prob}

But notice for what we wrote above to be ``okay'' we need that $A\otimes_k B$ is a reduced finitely generated $k$-algebra. The finite generation 
isn't too hard to see. The reducedness comes from the following (in Kempf):

We ahve a map $A\otimes B\to \{|\Spec A|\times |\Spec B|\to k\}$ as set of functions. The claim is that this map is injective.
The idea is that if $\sum_i f_i\otimes g_i\mapsto 0$, we can assume that the $f_i$ and $g_i$ are linearly independent.

But then for all $x,$ we get $\sum_i f_i(x)g_i=0:\Spec B\to k$. But then since the $g_i$ are linearly independent,
this means the $f_i(x)$ are all zero. Thus the nullstellensatz tells us that all $f_i=0$.



\end{document}