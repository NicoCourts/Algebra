\documentclass[12pt]{article}

\usepackage{setspace}

\usepackage{amsmath, graphicx, color, fancyhdr, tikz-cd, mdframed, enumitem, framed, adjustbox, bbm, upgreek, xcolor, hyperref, manfnt, wasysym}
\usepackage[framed,thmmarks]{ntheorem}
\usepackage[style=alphabetic, bibencoding=utf8]{biblatex}
%Set the bibliography file
\bibliography{sources}

\usepackage[T1]{fontenc}
\usepackage[urw-garamond]{mathdesign}
\usepackage{garamondx}

%Replacement for the old geometry package
\usepackage{fullpage}

%Input my definitions
\input{../mydefs.tex}

%Shade definitions
\theoremindent0cm
\theoremheaderfont{\normalfont\bfseries} 
\def\theoremframecommand{\colorbox[rgb]{0.9,1,.8}}
\newshadedtheorem{defn}[thm]{Definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%% Customize Below %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%header stuff
\setlength{\headsep}{24pt}  % space between header and text
\pagestyle{fancy}     % set pagestyle for document
\lhead{Algebraic Geometry} % put text in header (left side)
\rhead{Notes by Nico Courts} % put text in header (right side)
\cfoot{\itshape p. \thepage}
\setlength{\headheight}{15pt}
%\allowdisplaybreaks

% Document-Specific Macros


\begin{document}
%make the title page
\title{Algebraic Geometry\vspace{-1ex}}
\author{A course by Max Lieblich\\
Notes by Nico Courts}
\date{Autumn 2019/ Winter and Spring 2020}
\maketitle

\begin{abstract}
	A three-quarter sequence covering the basic theory of affine and projective 
	varieties, rings of functions, the Hilbert Nullstellensatz, localization, and 
	dimension; the theory of algebraic curves, divisors, cohomology, genus, and the 
	Riemann-Roch theorem; and related topics. 
\end{abstract}

\section{September 25, 2019}
The first thing that one asks is ``what is geometry?'' One needs to be able to answer this 
question before they define AG. One idea is that geometry is topology + structure.

\subsection{What is Geometry?}

\begin{ex}
	Exotic differentiable structures on a sphere. There are many different smooth structures,
	all of which are independent of the topology,

	$S^1\times S^1$ has infinitely many complex structures (remember the parallelograms)!
\end{ex}

How to you go about defining the geometry of a thing? One idea from manifolds: charts. These 
describe the local models and the interesting part is how this comes together to a whole space.

There is another idea to capture the ``local'' model of geometry that underlies modern algebraic geometry:
consider the map $\varphi:W\to W'\in\bbC\bbP^n$ and then say that this map is $C^\infty$ if and only if its coordinate
functions are. But the coordinate functions are problematic, so we can replace it with the following idea:

$\phi:W\to W'$ is $C\infty$ if and only if for all $C^\infty$ functions $f:W'\to \bbR$,
the composition
\[\varphi^\ast f=f\circ \varphi:W\to \bbR\]
is $C^\infty$.

To capture the manifold structure on $M$, it is equivalent to know the set of $C^\infty$ fucnctions $U\to \bbR$ for every open $U\subseteq M$.

\subsection{The Big Idea}
So then the idea we are talking away here is that \textit{geometry is in the functions} that exist on a particular space!

Fix a field $k$. 
\begin{defn}
	A \textbf{space with functions} is a topological space $X$ along with a collection (a $k$-algebra!) $\calO(U)$ of maps $U\to k$ for each open 
	$U\subseteq X$. 

	$\calO(U)$ are called \textbf{regular functions} and must satisfy:
	\begin{itemize}
		\item Given an open cover $U_\alpha$ of $U$, a function is regular if and only if its restrictions to each element of the cover is regular.
		\item If $f:U\to k$ is regular, then $D(f)=\{u\in U|f(u)\ne 0\}$ is an open set and $\frac{1}{f}\in\calO(D(f))$.
	\end{itemize}
\end{defn}

For the next time, try to think of as many examples of this as you can. Next time will be a mind blowing example of a variety.

\section{September 27, 2019}
\begin{prob}
	Do all the exercises in Kempf chapter 1!
\end{prob}

For now we assume that $k$ is algebraically closed.

\subsection{Examples of spaces with functions}
There were lots of suggestions, but here are a couple:
\begin{ex}
	Let $X=\bbS^2$ and let $\calO_X^{cts}$ be the continuous $\bbC$-valued functions. Alternatively
	we could consider a different sheaf $\calO_X^{an}$, the holomorphic functions. Or we could 
	consider $\calO_X^\infty$, the $C^\infty$ functions (under some smooth structure).
\end{ex}

\begin{defn}
	A \textbf{morphism} of spaces with functions between $(X,\calO_X)$ and $(Y,\calO_Y)$ is a continuous map 
	$\varphi:X\to Y$ such that for all $U\subseteq Y$ open and $f\in\calO_Y(U)$, the function 
	\[\phi^\ast f=f\circ\phi|_{\phi^{-1}(U)}:\phi^{-1}(U)\to k\in \calO_X(\phi^{-1}(U))\]

	In other words, a morphism of spaces with functions is a map of spaces that \textit{respects the regular functions.}
\end{defn}
\begin{ex}
	Let $X,Y$ be topological spaces and let $\calO_X$ and $\calO_Y$ be the continuous functions. Then morphisms are just continuous maps.
\end{ex}
\begin{ex}
	When $X$ and $Y$ are manifolds and $\calO_\bullet$ are complex-valued functions, then the maorphisms are maps 
	of manifolds.
\end{ex}

So now we return to the examples we saw before: $(\bbS^2,\calO^\infty)$, $(\bbS^2,\calO^{cts})$, and $(\bbS^2,\calO^{an})$.
A natural question to ask is when we have morphisms between these spaces to see if there exist ones that are the identity on $\bbS^2$.

Consider the identity map from the continuous to the analytic functions. Then take any map $f\in\calO^{an}$ and consider that 
\[f=f\circ id_{id^{-1}(U)}:U\to k\in\calO^{cts}(U)\]
and there is no map in the other direction.
\begin{rmk}
	Notice that since we are pulling functions back, the maps go in the opposite direction as you may think at first.
\end{rmk}

We can also talk about \textbf{open subspaces}. If $V\subseteq X$ is an open subset, we can let the induced space with functions 
be $(V,\calO_V)$ where if $U\subseteq V$ then $\calO_V(U):=\calO_X(U)$.

\subsection{Varieties}
\begin{defn}
	An \textbf{affine $k$-variety} is a space with functions $(Y,\calO_Y)$ such that for every space with functions $(X,\calO_X)$,
	the natural map 
	\[\Hom((X,\calO_X),(Y,\calO_Y))\to\Hom_{\Alg}(\calO_Y(Y),\calO_X(X))\]
	is a bijection and furthermore $\calO_Y(Y)=:k[Y]$ is a finitely generated $k$-algebra.
\end{defn}
\begin{rmk}
	The idea here is that the algebra maps (on the right) are precisely the same as the geometry maps (on the left).
	Algebraic geometry, baby.
\end{rmk}
So then this leads to a very simple (loose) definition:
\begin{defn}
	A \textbf{variety} is something that is covered by affine varieties.
\end{defn}

\begin{ex}
	$\bbA^1=k$. Give this space the cofinite topology. Then if we have $U=k\setminus\{x_1,\dots,x_n\}\subset \bbA^1$,
	\[\calO_{\bbA^1}(U)=\{f(t)\in k(t)| \text{poles are in }\{x_i\}\}\]
\end{ex}
\begin{prob}
	Show that $\bbA^1$ is an affine variety!
\end{prob}
\begin{rmk}
	Notice that this staetment is equivalent to saying that any morphism of spaces with functions gives us a regular map $X\to k$.
\end{rmk}

\section{September 30th, 2019}
One question that was asked: if we have fixed the underlying topological space in a space with functions, must there be a morphism 
between them somehow? Might there instead be a common cover of the two?

\begin{ex}
	Let $k$ be a field with some topology on it such that every point is closed (you could do the discrete topology).
	Let $\tilde\O(U)$ be the continuous funcitons $U\to k$. In other words, these functions are locally constant.

	Locally constant functions behave nicely under restrictions to opens, of course. The other axioms are also great.

	Have we really found an initial object in our category? This would be enough to establish a ``tent'' (as in 
	localization of categories). Try this out and see what happens!
\end{ex}

\subsection{The question of affine space}
Recall the question about whether $\A 1$ is an affine variety. The idea here is that $\phi:X\to k$ is a morphism of 
spaces with functions if and only if it is regular (that is, in $\O_{\A 1}$).

One direction is tautological (a morphism to $\A1$ has a polynomial underlying it), so let $\phi$ be regular. Then to see that $\phi$ is continuous 
can be checked by pulling back all closed sets. The important observation is that $D(f-a)=X\setminus\phi^{-1}(a)$, which is closed (an axiom for spaces with functions).

The last thing to check is where $\phi$ pulls back regular functions to regular functions. This relies on the facts that $\O_X$ is a $k$-algebra and that 
$\phi(x)-b_j$ is regular on $U$ when $b_j\notin U$.

\subsection{Algebra maps}
Notice that since we have a condition that $\O_X(X)$ must be finitely generated as a $k$-algebra, this means that 
\[\Hom(X,Y)=\Hom_k(\O_Y(Y),\O_X(X))=\Hom_k(k[x_1,\dots,x_n]/(f_1,\dots,f_m),O_X(X))\]
and
\[\Hom(X,Y)=\{(\gamma_1,\dots,\gamma_n)\in(\O_X(X))^n:f_j(\gamma_i)=0,\forall j=1,\dots,m\}\]
In other words, we are looking at maps that factor through $Z$:
\begin{center}
	\begin{tikzcd}
		(\gamma_1,\dots,\gamma_n):X\ar[r]\ar[dr] & k^n\\
		& Z=Z(f_i)\ar[u,hook]
	\end{tikzcd}
\end{center}
Now what we want to say is that $Y=Z$. That is, \textit{affine varieties are closed subsets of affine spaces.}

Now this is all good, but the problem is that we had to \textit{choose} a presentation of $\O_Y(Y)$ to get this picture.
of course we want something more canonical! We will see in this class (and in Kempf) that this can be done.

\section{October 2, 2019}
\subsection{Questions without (complete) answers}
\subsubsection{Morphisms and stuff}
A question to get things started for the day. Let $X$ and $Y$ be spaces with functions and let $Y$ be an affine variety and let $f:Y\to X$ be a map of sets 
(but with no further assumption on $f$). This naturally induces amap from $\calO_X(X)$ to the functions $\Hom_{\Set}(Y,k)$ (which 
clearly contains the regular functions on $Y$).

Further assume that there exists a $\gamma:\O_X(X)\to\O_Y(Y)$. We know that since $Y$ is affine, $\gamma$ corresponds to a morphism $\varphi:Y\to X$.
Then the question is: when does $f=\varphi$? We've already answered this question for $\A1$, notice.
\subsubsection{Algebraic closure}
Where do we use algebraic closure of the base field? It has been swept under the rug a bit, but consider the function
\[\frac{1}{x^2+1}:\bbR\to \bbR.\]

This certainly seems like it should be a regular function (e.g. it is rational and defined everywhere on $\bbR$) but this 
conflicts with the idea that we want to identify $\O_{\A1}(\A1)=k[t]$, but that is clearly not the case here. Think about this.
\subsubsection{Yet another}\label{subsubsec:third}
Consider the set $R$ of all continuous maps $k\to k$ under the cofinite topology. Someone asked if $R$ is a $k$-algebra. The answer is 
a bit convoluted, but the short answer is no. Specifically if we are using the product topology on $k\times k$, the addition map isn't continuous! 
This also points to the question of what topology is the correct one to use on these things.

\subsection{Back to affine varieties}
Recall that we constructed a (highly-non-canonical) picutre of how any affine variety arises as a closed subset of some affine space $k^n$.

We want to remove this dependence on presentation, however, and that is what we are working toward.

\subsubsection{Affine Space}
Now we focus in on $\A n=k^n$. We really want that the projection functions $x_i:k^n\to k$ should be regular. But since we want this (eventually)
to form a $k$-algebra, we want that each $f\in[x_1,\dots,x_n]$ should be regular!

The axioms of a space with functions tells us that the \textbf{vanishing locus}
\[Z(f)=\{a|f(a)=0\}\subseteq k^n\]
and furthermore $Z(S)$ should be closed for all $S\subseteq k[x_1,\dots,x_n]$. This leads us to a definition:
\begin{defn}
	A subset $Z\subseteq k^n$ is \textbf{Zariski-closed} if there exists an $S\subseteq k[x_1,\dots,x_n]$
	such that $Z=Z(S)$.
\end{defn}
\begin{lem}
	The Zariski closed sets are the closed sets of a topology (called the \textbf{Zariski Topology}).
\end{lem}
\begin{prf}
	Just do it. Nike. \checked
\end{prf}
\begin{rmk}
	Notice that here the set $\{(a,-a)\}\subseteq k^2$ (the pullback of zero under the addition map) is Zariski closed!
	This fixes the problem we were running into in the third question (sec.~\ref{subsubsec:third}) above.
\end{rmk}
Now since $Z(S)=Z(I_S)$ where $I_S$ is the ideal generated by $S$, it is enough to consider vanishing loci of ideals. Furthermore we have the 
map that extracts the ideal of functions that vanish on a set $Z\subseteq k^n$. There are a ton of great identiies you can prove here. Go to your 
favorite algebra book (e.g. Dummit \& Foote) to see them.

\subsubsection{Functions}
What about functions on these spaces? If we take $f\in k[x_1,\dots,x_n]$ these seem like they should be regular functions $k^n\to k$.
\begin{thm}[(Weak) Nullstellensatz]
	Say $k=\bar k$. Then every maximal ideal $\frakm\lhd k[x_1,\dots,x_n]$ has the form $(x_1-a_1,\dots,x_n-a_n)$.
\end{thm}
\begin{rmk}
	Equivalently, it is the kernel of a $k$-algebra morphis $k[x_1,\dots,x_n]\to k$.
\end{rmk}
\begin{cor}[Nullstellensatz]\label{nullstellensatz}
	Let $J$ be an ideal of $k[x_1,\dots,x_n]$. Then $I(Z(J))=\sqrt{J}$.
\end{cor}
\begin{prf}
	\textit{Notice this only works when $k$ is uncountable!} Suppose that $\frakm$ is a maximal ideal with residue field 
	$L=k[x_i]/\frakm$. This gives us a surjection of $k[x_1,\dots,x_n]\to L$. Thus $\dim_k L$ is countable!

	But $\dim_k k(t)$ is uncountable! The proof here is that the $\frac{1}{t-\lambda}$ for $\lambda\in k$ is a linearly-independent collection.
	So then $L/k$ is algebraic, and since $k=\bar k$ $L=k$.
\end{prf}

\section{October 4, 2019}
Today we are going to be talking a bit more about the existence of affine varieties. Max talked a bit about the philosophy of work in this course:
he made this extended metaphor concerning butterflies but the take-away is to take learning onto ourselves. :)

\subsection{Questions from last time}
\subsubsection{Maps and elements}
In the book we did this silly thing where we defined $\Spec A\eqdef\Hom_{\Alg}(A,k)$ and then idendified 
$A$ with $k[\Spec A]$ by $a(f)=f(a)$. This seems a bit silly at first, but it may have something to do with the fact that 
we are looking for a natural way to construct affine varieties without having to choose a presentation. We will hopefully see 
something about this by the end of the day. 

\subsection{Back to the Nullstellensatz}
Recall that we defined the operators $Z$ and $I$ that ``do the work'' of the Nullstellensatz. We then wrote (cor.~\ref{nullstellensatz}) $I(Z(J))=\sqrt{J}$. The idea is that 
this will gives us the function structure on an affine variety.
\begin{prf}[Cor.~\ref{nullstellensatz}]
	One way is not too hard. For the more difficult direction:
	Let $g\in I(Z(J))$. Then $Z(J)\subseteq Z(g)$. Now notice taht $D(g)$ can be naturally identified 
	with $\Spec k[x_i][1/g]$. Then consider
	\[J'=Jk[x_i][1/g]\]
	and the key realization is that $J'$ cannot be contained in any maximal ideal. The idea is that you can work by contradiction:
	this implies that $J$ is contained in an element of $D(g)$, but it isn't!

	Thus $J'=(1)$. So we can write $1=\frac{f}{g^N}$. Thus $g^k(f-g^N)=0$ in $k[x_i]$ and since $g$ isn't nilpotent, $f=g^N$.
\end{prf}
\begin{cor}
	There is a lattice anti-isomorphism between the radiacal ideals in $k[x_i]$ and Zariski-closed 
	subsets $Z\subseteq k^n$ via the maps $J\to Z(J)$ and $Z\mapsto I(Z)$.
\end{cor}
\begin{cor}
	For any ideal $J\subseteq k[x_i]$, 
	\[\sqrt{J}=\bigcap_{\text{maximal } \frakm\supset J}\frakm\]
\end{cor}
\begin{rmk}
	``The functions that vanish at the zero locus of $J$ are precisely those that vanish at all the points of $J$''.
\end{rmk}
\begin{cor}
	$D(g)\subseteq k^n$. Then the map 
	\[k[x_i][1/g]\to \Hom(D(g),k)\]
	via the map 
	\[\frac{f}{g^N}\mapsto \left(x\mapsto \frac{f(x)}{g(x)^N}\right)\]
	is injective.
\end{cor}

\subsection{Affine space}
Let's define $\A n\eqdef k^n$ with the Zariski topology. Let 
\[\calO_{\A n}(U)=\{f\in k(x_1,\dots,x_n)|\operatorname{poles}(f)\subseteq\A n\setminus U\}\subseteq\Hom(U,k)\]
Then, for example,
\[\O_{\A n}(D(g))=k[x_1,\dots,x_n][1/g].\]
\begin{prop}
	$\A n$ is an affine variety.
\end{prop}
\begin{prf}
	$\phi:X\to \A n$ gives us maps $\phi_1,\dots,\phi_n:X\to k$. Then that $\A n$ is affine relies on the fact:
	$\phi$ is a morphis if and only if the $\phi_i$ are regular. One direction is not too bad since coordinate functions 
	are regular by the axioms of morphisms. The other direction needs to be completed! DO IT!
\end{prf}

\section{October 7th, 2019}
\subsection{Questions/Discussions}
\subsubsection{Initial and final objects}
We asked before whether the space with functions $(X,\O^{\text{loc. constant}})$ is an initial or terminal 
object. Adam asserts that it is a final object in the category of spaces with functions where the underlying space is $X$ (I believe this 
is sheaves over $X$). 

Notice we can't use all continus maps where $k$ has the discrete topology, since $0\in k$ is not closed. 

\subsubsection{Subalgebras and rings of functions}
Assume that $f:B\to A$. This gives us a nice map $\tilde f:\Spec A\to \Spec B$. One question we may have is 
``if $f$ is injective, does this imply that $\tilde f$ is surjective?''

Consider an example: Say $B=k[t]\hookrightarrow k[s,t]=A$. Then any function on $A$ looks like $(s-a,t-b)$
and the map induced on functions is just projection, so this gives us the map $(t-b)$, which is all the maps on $B$.

Another example: consider the map $\bbC[t]\to\bbC[s]$ sending $t\to s^2$. Then this induces a map $z\to z^2$ from $\bbC\to \bbC$ (why?)
which is again surjective.

Next consider $k[x,u]/(xy-1)=k[x][1/x]=A$, which is a hyperbola over $\bbR$. Then the localization map $B=k[x]\hookrightarrow A$
induces a map that is basically the identity everywhere \textit{except zero}. So it is \textbf{not surjective.}

\brk

Some properties to notice: examples one and two are \textit{flat} extensions. The second is a \textbf{finite} extension. The 
third is neither. We will investigate what is going on further later on.

One idea: consider whether the map $X=\Spec B\to \A 2\setminus(\A1\setminus\{0\})$ exists. One of the things that he keeps questioning is 
whether the target spaces is open or closed as a subset of affine space. (Note that a map is proper if it sends closed to closed).

\subsection{Back to affine varieties}
Continuing our proof/discussion from last time, we were considering $\varphi:X\to\A n$ which we said was a morphism iff each coordinate $\phi_i:X\to k$ is regualr.
(This basically follow since $\varphi$ is continuous and sends regular functions to regular functions.

For the regularity, consider $U\subseteq\A n$. Then $U$ admits a cover of $D(g)$, so it suffices to check where $\phi$
pulls back regular maps on $D(g)$. Of course this is $k[x_1,\dots,x_n][1/g]$! So consider the image of 
\[\frac{1}{g^N}\sum a_ix^i\]
and its image in $\phi^{-1}(D(g))=D(\phi^\ast(g))$ is 
\[\frac{\sum a_i(\phi^\ast x)^i}{(\phi^\ast g)^N}\]

\begin{rmk}
	Big idea: We started with the ``dream'': that there is a correspondence between the algebra and the geometry. This is 
	our main guiding principle, so we know we've found the ``right'' topology when we have found one that supports this dream.
	This is an answer to the question ``why is the Zariski topology not just a degenerate case?''
\end{rmk}

\subsubsection{Affine varieties in general}
Let $J\subseteq k[x_1,\dots,x_n]$ be a radical ideal. We know this corresponds (uniquely!) 
to a subset $Z\subseteq \A n$. Here we can consider $(Z,\O_Z)$ where $Z$ is a subspace of $\A n$.

Then take any closed $W\subseteq Z$, which is the intersection (by definition of the topology)
\[\cap_{i\in I}Z(f_i)\quad f_i\in h[x_i]/J\]
and then $\O_Z(D(g))=\frac{k[x_i]}{J}[1/g]$ (note we used the nullstellensatz here!).

So then we claim that $Z$ is an affine variety. To see this, consider a map $\varphi:X\to Z$ and the composition
\[X\xrightarrow{\varphi} Z\hookrightarrow \A n\]
so topologically $X$ cfactors through $Z$ if and only if $J\subseteq \O^{\A n}(\A n)$ maps to zero in $\O_X(X)$.

The takeaway here is that a morphism $X\to\A n$ factors through $Z$ topologically if and only if it factors in the categorification of 
spaces with functions.


\end{document}